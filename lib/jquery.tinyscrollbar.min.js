/*! tinyscrollbar - v2.5.1
 * https://github.com/Activehigh/tinyscrollbar
 *
 * Licensed under the MIT license */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n(require("jquery")):n(jQuery)})(function(n){"use strict";function r(r,u){function it(){return f.update(),ut(),f}function rt(){e.css(o,f.thumbPosition);c.css(o,-f.contentPosition);l.css(h,f.trackSize);a.css(h,f.trackSize);e.css(h,f.thumbSize)}function ut(){v&&(k[0].ontouchstart=function(n){1===n.touches.length&&(n.stopPropagation(),b(n.touches[0]))});e.bind("mousedown",function(n){v&&(this.allowUp=this.scrollTop>0,this.allowDown=this.scrollTop<this.scrollHeight-this.clientHeight,this.prevTop=null,this.prevBot=null,this.lastY=n.touches[0].pageY);n.stopPropagation();b(n)});a.bind("mousedown",function(n){b(n,!0)});n(window).resize(function(){f.update("relative")});f.options.wheel&&window.addEventListener?r[0].addEventListener(tt,nt,!1):f.options.wheel&&(r[0].onmousewheel=nt)}function d(){return f.contentPosition>0}function g(){return f.contentPosition<=f.contentSize-f.viewportSize-5}function b(i,r){f.hasContentToSroll&&(n("body").addClass("noSelect"),w=r?e.offset()[o]:y?i.pageX:i.pageY,v&&(document.ontouchmove=function(n){(f.options.touchLock||d()&&g())&&n.preventDefault();n.touches[0][t+"Touch"]=1;p(n.touches[0])},document.ontouchend=s),n(document).bind("mousemove",p),n(document).bind("mouseup",s),e.bind("mouseup",s),a.bind("mouseup",s),p(i))}function nt(t){if(f.hasContentToSroll){var i=t||window.event,u=-(i.deltaY||i.detail||-1/3*i.wheelDelta)/40,s=i.deltaMode===1?f.options.wheelSpeed:1;f.contentPosition-=u*s;f.contentPosition=Math.min(f.contentSize-f.viewportSize,Math.max(0,f.contentPosition));f.thumbPosition=f.contentPosition/f.trackRatio;r.trigger("move");e.css(o,f.thumbPosition);c.css(o,-f.contentPosition);(f.options.wheelLock||d()&&g())&&(i=n.event.fix(i),i.preventDefault())}t.stopPropagation()}function p(n){if(f.hasContentToSroll){var s=y?n.pageX:n.pageY,i=n[t+"Touch"]?w-s:s-w,u=0;u=e.get(0)!==n.target?Math.min(f.trackSize-f.thumbSize,Math.max(0,f.thumbPosition+(v?i*1.5/f.trackRatio:i))):Math.min(f.trackSize-f.thumbSize,Math.max(0,f.thumbPosition+i));f.contentPosition=u*f.trackRatio;r.trigger("move");e.css(o,u);c.css(o,-f.contentPosition)}return!1}function s(){f.thumbPosition=parseInt(e.css(o),10)||0;n("body").removeClass("noSelect");n(document).unbind("mousemove",p);n(document).unbind("mouseup",s);e.unbind("mouseup",s);a.unbind("mouseup",s);document.ontouchmove=document.ontouchend=null}this.options=n.extend({},i,u);this._defaults=i;this._name=t;var f=this,k=r.find(".viewport"),c=r.find(".overview"),l=r.find(".scrollbar"),a=l.find(".track"),e=l.find(".thumb"),v="ontouchstart"in document.documentElement,tt="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",y=this.options.axis==="x",h=y?"width":"height",o=y?"left":"top",w=0;return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.hasContentToSroll=!1,this.update=function(n){var t=h.charAt(0).toUpperCase()+h.slice(1).toLowerCase();this.viewportSize=k[0]["offset"+t];this.contentSize=c[0]["scroll"+t];this.contentRatio=this.viewportSize/this.contentSize;this.trackSize=this.options.trackSize||this.viewportSize;this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio));this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize);this.hasContentToSroll=this.contentRatio<1;l.toggleClass("disable",!this.hasContentToSroll);switch(n){case"bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(n,10)||0}return this.thumbPosition=this.contentPosition/this.trackRatio,rt(),f},it()}var t="tinyscrollbar",i={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,thumbSize:!1,thumbSizeMin:20};n.fn[t]=function(i){return this.each(function(){n.data(this,"plugin_"+t)||n.data(this,"plugin_"+t,new r(n(this),i))})}});
